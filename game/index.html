<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Snakeshift</title>
  <link rel="stylesheet" type="text/css" href="./index.css" />
  <!-- <link rel="icon" type="image/png" href="/graphics/yin-yang-smol-sneks-128px.png" sizes="128x128" /> -->
  <link rel="icon" type="image/png" href="/graphics/yin-yang-larger-sneks-180px.png" sizes="180x180" />
</head>

<body>
  <div class="screen" id="main-menu">
    <h1>Snake<span
        style="color: black; background: white; border-radius: 20px 30px / 10px 0px; padding: 4px">Shift</span></h1>
    <button class="bw-button" id="play-button" autofocus>Play</button>
    <button class="bw-button" id="level-select-button">Level Select</button>
    <button class="bw-button" id="level-editor-button">Level Editor</button>
    <button class="bw-button" id="credits-button">Credits</button>
  </div>
  <div class="screen" id="credits">
    <h1>Credits</h1>
    <p>
      <a href="https://isaiahodhner.io/games">Isaiah Odhner</a> — Programming, Design, Art
    </p>
    <h2>Sound Effects</h2>
    <p>
      <a href="https://freesound.org/people/schreibsel/sounds/540162/">schreibsel (Freesound) — Snake hiss</a>
    </p>
    <!-- <p>
      <a href="https://freesound.org/people/spt3125/sounds/24558/">spt3125 (Freesound) — Kayageum</a>
    </p> -->
    <p>
      <a href="https://freesound.org/people/joseph.larralde/sounds/352493/">joseph.larralde (Freesound) —
        Glockenspiel</a>
    </p>
    <p>
      <a href="https://pixabay.com/sound-effects/gong-2-232435/">LazyChillZone (Pixabay) — Gong</a>
    </p>
    <p>
      <a href="https://freesound.org/people/JensZygar/sounds/486629/">JensZygar (Freesound) — Final Gong</a>
    </p>
    <p>
      <a href="https://en.wikipedia.org/wiki/Lego_Creator_(video_game)">LEGO Creator</a> — Undo/Redo (temporary)
    </p>
    <p>
      <a href="https://freesound.org/people/Riley_Garinger/sounds/736438/">Riley_Garinger (Freesound) — Level resize</a>
    </p>
    <p>
      <a href="https://freesound.org/people/MindlessTrails/sounds/509532/">MindlessTrails (Freesound) — Crate push</a>
    </p>
  </div>
  <div class="screen" id="level-select">
    <h2>Level Select</h2>
    <div id="level-list">
      <h3>Easy</h3>
      <button class="bw-button level-button" data-level="levels/easy/001-movement.json">
        Movement
      </button>
      <button class="bw-button level-button" data-level="levels/easy/002-bridge.json">
        Bridge
      </button>
      <button class="bw-button level-button" data-level="levels/easy/003-ferry.json">
        Ferry
      </button>
      <button class="bw-button level-button" data-level="levels/easy/004-yin-yang-give-and-take.json">
        Yin and Yang: Give and Take
      </button>
      <button class="bw-button level-button" data-level="levels/easy/005-fill-the-box-further-too-many-solutions.json">
        Fill The Box
      </button>
      <button class="bw-button level-button" data-level="levels/easy/006-north-star.json">
        North Star
      </button>
      <h3>Medium</h3>
      <button class="bw-button level-button" data-level="levels/medium/corkscrew.json">
        Corkscrew
      </button>
      <button class="bw-button level-button" data-level="levels/medium/proper-lock.json">
        Lock Picking
      </button>
      <h3>Hard</h3>
      <button class="bw-button level-button" data-level="levels/hard/yin-yang-full.json">
        Yin and Yang: Challenge
      </button>
      <button class="bw-button level-button" data-level="levels/hard/security-by-obscurity-lock.json">
        Security by Obscurity
      </button>
      <button class="bw-button level-button" data-level="levels/hard/I-tessellation-greedy-eyes.json">
        Greedy Eyes
      </button>
      <button class="bw-button level-button" data-level="levels/hard/the-finish-line.json">
        The Finish Line
      </button>
      <div style="opacity: 0.5" id="test-cases-not-real-levels" hidden>
        <h3>Test Cases</h3>
        <button class="bw-button level-button" data-level="levels/tests/move-right-to-win.json">
          Test Level 001 (Just move right to win)
        </button>
        <button class="bw-button level-button" data-level="levels/tests/move-left-to-win.json">
          Test Level 002 (Just move left to win)
        </button>
        <button class="bw-button level-button" data-level="levels/tests/test-level-with-no-goal.json">
          Test Level With No Goal
        </button>
        <button class="bw-button level-button" data-level="levels/tests/possible-bug-unable-to-move-left.json">
          Possible bug: unable to move left here?
        </button>
        <button class="bw-button level-button"
          data-level="levels/tests/three-overlapped-snakes-should-be-considered-valid.json">
          Three overlapped snakes should be considered valid
        </button>
        <button class="bw-button level-button" data-level="levels/tests/format-version-too-new.json">
          EMIT Format version too new (Error Message Itself Test)
        </button>
        <button class="bw-button level-button" data-level="levels/tests/crate-test.json">
          Crate Test
        </button>
        <button class="bw-button level-button" data-level="levels/tests/999-last-level-move-right-to-win.json">
          Test Level 999 (Just move right to win)
        </button>
      </div>
    </div>
  </div>
  <div class="screen" id="loading-screen">
    <div id="load-progress"></div>
  </div>
  <div class="screen splash-screen" id="level-splash">
    <h1 id="level-splash-title"></h1>
    <div class="gong-effect"></div>
  </div>
  <div class="screen" id="game-win-screen">
    <h1>You Win!</h1>
    <blockquote id="tao-te-ching-quote">
      <div class="line-a">Thirty spokes share the wheel's hub;</div><br>
      <div class="line-b">It is the center hole that makes it useful.</div><br>
      <div class="line-a">Shape clay into a vessel;</div><br>
      <div class="line-b">It is the space within that makes it useful.</div><br>
      <div class="line-a">Cut doors and windows for a room;</div><br>
      <div class="line-b">It is the holes which make it useful.</div><br>
      <div class="line-a">Therefore profit comes from what is there;</div><br>
      <div class="line-b">Usefulness from what is not there.</div>

      <footer>
        &mdash; <cite>Tao Te Ching, Chapter 11</cite>
      </footer>
    </blockquote>
    <div class="gong-effect"></div>
  </div>
  <div id="game-options-bar">
    <!-- TODO: make class an id or use a second button to better integrate with the entities bar -->
    <button class="bw-button back-to-main-menu-button" aria-keyshortcuts="Escape">
      <img src="/graphics/back.svg" alt="" />
      <span class="button-text">Back</span>
    </button>
    <button class="bw-button level-flow-control-button hide-in-campaign" id="play-edit-toggle-button"
      aria-keyshortcuts="`">
      <!-- TODO: indicate toggle state -->
      <!-- I have sketched out an animation where the play icon triangle becomes the tip of a pencil and the whole button becomes a pencil,
      but it might be a lot of work and might just look silly. Could be fun though. -->
      <!-- <span style="font-size: 1.4em; font-family: monospace; font-variant-emoji: text; filter: grayscale(1)">
        ▶&#xFE0E;/✏&#xFE0E;
      </span> -->
      <img src="/graphics/play-edit.svg" alt="" />
      <span class="button-text">Play/Edit</span>
    </button>
    <button class="bw-button level-flow-control-button" id="restart-level-button" aria-keyshortcuts="R">
      <img src="/graphics/restart.svg" alt="" />
      <span class="button-text">Restart Level</span>
    </button>
    <button class="bw-button level-flow-control-button" id="undo-button" aria-keyshortcuts="Z">
      <img src="/graphics/undo.svg" alt="" />
      <span class="button-text">Undo</span>
    </button>
    <button class="bw-button level-flow-control-button" id="redo-button" aria-keyshortcuts="Y">
      <img src="/graphics/undo.svg" alt="" style="transform: scaleX(-1)" />
      <span class="button-text">Redo</span>
    </button>
    <button class="bw-button" id="mute-button" aria-keyshortcuts="M" aria-pressed="false">
      <img src="/graphics/speaker.svg" alt="" />
      <span class="button-text" id="mute-button-text">Mute</span>
    </button>
    <button class="bw-button" id="fullscreen-button" aria-keyshortcuts="F">
      <!-- <img src="/graphics/fullscreen.svg" alt="" /> -->
      <img src="/graphics/move.svg" alt="" style="transform: rotate(45deg)" />
      <span class="button-text">Fullscreen</span>
    </button>
  </div>
  <div id="level-editor">
    <div id="entities-bar">
      <button class="bw-button tool-button entity-button" data-entity="Snake" data-color="White">
        <span class="button-text">Snake (White)</span>
      </button>
      <button class="bw-button tool-button entity-button" data-entity="Snake" data-color="Black">
        <span class="button-text">Snake (Black)</span>
      </button>
      <button class="bw-button tool-button entity-button" data-entity="Food" data-color="White">
        <span class="button-text">Food (White)</span>
      </button>
      <button class="bw-button tool-button entity-button" data-entity="Food" data-color="Black">
        <span class="button-text">Food (Black)</span>
      </button>
      <button class="bw-button tool-button entity-button" data-entity="Inverter" data-color="Both">
        <span class="button-text">Inverter</span>
      </button>
      <button class="bw-button tool-button entity-button" data-entity="Crate" data-color="White">
        <span class="button-text">Crate (White)</span>
      </button>
      <button class="bw-button tool-button entity-button" data-entity="Crate" data-color="Black">
        <span class="button-text">Crate (Black)</span>
      </button>
      <button class="bw-button tool-button entity-button" data-entity="Block" data-color="White">
        <span class="button-text">Wall (White)</span>
      </button>
      <button class="bw-button tool-button entity-button" data-entity="Block" data-color="Black">
        <span class="button-text">Wall (Black)</span>
      </button>
      <button class="bw-button tool-button entity-button" data-entity="Block" data-color="Both">
        <span class="button-text">Wall (Both)</span>
      </button>
      <button class="bw-button tool-button entity-button" data-entity="Block" data-color="None">
        <!-- <span class="button-text">Floor (Either)</span> -->
        <span class="button-text">Grass</span>
      </button>
      <!-- entity buttons are brush tools -->
      <!-- <button class="bw-button tool-button" data-tool="Brush">Brush</button> -->
      <button class="bw-button tool-button" data-tool="Eraser">
        <img src="/graphics/eraser.svg" alt="" />
        <span class="button-text">Eraser</span>
      </button>
      <button class="bw-button tool-button" data-tool="Select">
        <img src="/graphics/select.svg" alt="" />
        <span class="button-text">Select</span>
      </button>
      <button class="bw-button tool-button" data-tool="Move">
        <img src="/graphics/move.svg" alt="" />
        <span class="button-text">Move</span>
      </button>
      <button class="bw-button" id="clear-button" aria-keyshortcuts="Delete">
        <img src="/graphics/trash.svg" alt="" />
        <span class="button-text">Clear</span>
      </button>
      <button class="bw-button" id="invert-button" aria-keyshortcuts="I">
        <img src="/graphics/invert-9.svg" alt="" />
        <!-- <span style="font-size: 2.4em; font-family: monospace; font-variant-emoji: text; filter: grayscale(1)">
          ☯&#xFE0E;
        </span> -->
        <span class="button-text">Invert</span>
      </button>
      <button class="bw-button" id="level-info-button" aria-controls="level-info-editor" aria-keyshortcuts="Alt+E">
        <img src="/graphics/level-info.svg" alt="" />
        <span class="button-text">Level Info</span>
      </button>
      <button class="bw-button" id="save-button" aria-keyshortcuts="Control+S Meta+S">
        <img src="/graphics/save.svg" alt="" />
        <!-- <span style="font-size: 1.4em; font-family: monospace; font-variant-emoji: text; filter: grayscale(1)">
          💾&#xFE0E;
        </span> -->
        <span class="button-text">Save</span>
      </button>
      <button class="bw-button" id="open-button" aria-keyshortcuts="Control+O Meta+O">
        <img src="/graphics/open.svg" alt="" />
        <!-- <span style="font-size: 1.4em; font-family: monospace; font-variant-emoji: text; filter: grayscale(1)">
          📂&#xFE0E;
        </span> -->
        <span class="button-text">Open</span>
      </button>
    </div>
    <!-- <div id="toolbar">
      <button id="play-button">Play</button>
      <button id="save-button">Save</button>
      <button id="load-button">Load</button>
      <button id="clear-button">Clear</button>
      <button id="undo-button">Undo</button>
      <button id="redo-button">Redo</button>
    </div> -->
    <dialog id="level-info-editor">
      <h2>Level Info</h2>
      <form method="dialog">
        <!-- <div class="control-row">
          <label for="level-title">Title:</label>
          <input type="text" id="level-title" />
        </div>
        <div class="control-row">
          <label for="level-author">Author:</label>
          <input type="text" id="level-author" />
        </div>
        <div class="control-row">
          <label for="level-description">Description:</label>
          <textarea id="level-description"></textarea>
        </div> -->
        <div class="control-row">
          <label for="level-width">Width:</label>
          <input type="number" id="level-width" />
        </div>
        <div class="control-row">
          <label for="level-height">Height:</label>
          <input type="number" id="level-height" />
        </div>
        <div class="control-row">
          <button value="ok" class="bw-button" id="level-info-editor-ok-button">OK</button>
          <button value="cancel" formmethod="dialog" class="bw-button"
            id="level-info-editor-cancel-button">Cancel</button>
        </div>
      </form>
  </div>
  </div>
  <div class="level-specific-overlay" data-for-level="levels/easy/001-movement.json" hidden>
    <!-- It is actually possible to get stuck on this level. TODO: detect this or limit the size of the snake -->
    <h2>How to Move</h2>
    <!-- <p>You can use a gamepad, keyboard, mouse, pen, or touch to play.</p> -->
    <table>
      <tr>
        <td style="text-align: right; vertical-align: bottom;"><strong>Keyboard:</strong></td>
        <td style="text-align: left;">
          Use the arrow keys
          <span style="display: inline-block;">
            <kbd style="opacity:0;user-select:none;margin-bottom:-0.1em" aria-hidden="true">_</kbd><!--
            --><kbd style="margin-bottom:-0.1em">↑</kbd><!--
            --><br style="user-select:none" aria-hidden="true"><!--
            --><kbd>←</kbd><kbd>↓</kbd><kbd>→</kbd>
          </span>
          or
          <span style="display: inline-block;">
            <kbd style="opacity:0;user-select:none;margin-bottom:-0.1em;margin-left:-0.2em" aria-hidden="true">Q</kbd><!--
            --><kbd style="margin-bottom:-0.1em">W</kbd><!--
            --><br style="user-select:none" aria-hidden="true"><!--
            --><kbd>A</kbd><kbd>S</kbd><kbd>D</kbd>
          </span>
          or
          <!-- vi-style -->
          <!-- vi keys -->
          <span style="display: inline-block;">
            <kbd>H</kbd><kbd>J</kbd><kbd>K</kbd><kbd>L</kbd>
          </span>
          or numpad
          <span style="display: inline-block;">
            <kbd style="opacity:0;user-select:none;margin-bottom:-0.1em" aria-hidden="true">7</kbd><!--
            --><kbd style="margin-bottom:-0.1em">8</kbd><br style="user-select:none" aria-hidden="true"><!--
            --><kbd>4</kbd><kbd style="opacity:0;user-select:none;" aria-hidden="true">5</kbd><kbd>6</kbd><!--
            --><br style="user-select:none" aria-hidden="true"><!--
            why does this one line break sneak into the clipboard whereas user-select:none works for the others?
            --><kbd style="opacity:0;user-select:none;margin-top:-0.1em" aria-hidden="true">1</kbd><!--
            --><kbd style="margin-top:-0.1em">2</kbd>
          </span>
        </td>
      </tr>
      <tr>
        <td style="text-align: right;"><strong>Gamepad:</strong></td>
        <td style="text-align: left;">Either use the ✜ D-pad, or press Ⓐ while holding the left stick in a direction.
        </td>
      </tr>
      <tr>
        <td style="text-align: right;"><strong>Mouse/pen/touch:</strong></td>
        <td style="text-align: left;">Drag anywhere to move in a given direction.</td>
      </tr>
    </table>
  </div>
  <div class="level-specific-overlay" data-for-level="levels/easy/002-bridge.json" hidden>
    <!-- It is actually possible to get stuck on this level. TODO: detect this? I don't want to clutter the tutorial text...-->
    <!-- TODO: show controls specific to the active control scheme -->
    <!-- <p>Press <kbd>Tab</kbd> to switch snakes, or use shoulder buttons on a gamepad, or click/tap a snake to switch to it.</p> -->
    <!-- It is actually possible to get stuck on this level. TODO: detect this or limit the size of the snake -->
    <h2>How to Switch Snakes</h2>
    <table>
      <tr>
        <td style="text-align: right; vertical-align: bottom;"><strong>Keyboard:</strong></td>
        <td style="text-align: left;">
          Press <kbd>Tab</kbd> to switch snakes.
        </td>
      </tr>
      <tr>
        <td style="text-align: right;"><strong>Gamepad:</strong></td>
        <td style="text-align: left;">Use the shoulder buttons to switch snakes.</td>
        </td>
      </tr>
      <tr>
        <td style="text-align: right;"><strong>Mouse/pen/touch:</strong></td>
        <td style="text-align: left;">Click/tap a snake to switch to it.</td>
      </tr>
    </table>
  </div>
  <div class="level-specific-overlay" data-for-level="levels/easy/003-ferry.json" hidden>
    <!-- TODO: show controls specific to the active control scheme -->
    <!-- <p>Press <kbd>Z</kbd>/ⓧ to undo, or <kbd>R</kbd>/Ⓨ to restart the level.</p> -->
    <p>Press <kbd>Z</kbd> to undo, or <kbd>R</kbd> to restart the level, or ⓧ/Ⓨ on a gamepad.</p>
  </div>
  <div id="level-stuck-hint" hidden>
    <!-- TODO: show controls specific to the active control scheme -->
    <!-- Want neutral language that doesn't imply you're having trouble. -->
    <!-- <h2>Stuck?</h2> -->
    <p>Press <kbd>Z</kbd> to undo or <kbd>R</kbd> to restart</p>
  </div>
  <script type="module" src="./main.ts"></script>
</body>

</html>
